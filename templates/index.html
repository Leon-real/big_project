<!-- index.html -->
{% extends 'base.html' %}
{% load static %}

{% block static %}
    <!-- 외부 CSS 파일에 대한 링크 -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
{% endblock %}

{% block content %}
    <!-- 메인 -->
    <div id="main">
        <!-- 섹션 -->
        <section class="wrapper style1">
            <div class="inner">
                <!-- 2 열 -->
                <div class="flex flex-2">
                    <div class="col col1">
                        <div class="image round fit">
                            <a href="#" class="link"><img src="{% static 'images/guest.png' %}" alt="" width="320" height="320"></a>
                        </div>
                    </div>
                    <div class="col col2">
                        <h3>고객 관리 페이지</h3>
                        <p>내용</p>
                        {% if user.is_authenticated %}
                            <a href="/client/" class="button">Learn More</a>    
                        {% else %}
                            <a href="/account/" class="button">Learn More</a>    
                        {% endif %}

                    </div>
                </div>
            </div>
        </section>

        <!-- 섹션 -->
        <section class="wrapper style2">
            <div class="inner">
                <div class="flex flex-2">
                    <div class="col col2">
                        <h3>Client TeleMarketing</h3>
                        <p>내용</p>
                        {% if user.is_authenticated %}
                            <a href="/chatbot/" class="button">Learn More</a>    
                        {% else %}
                            <a href="/account/" class="button">Learn More</a>    
                        {% endif %}
                    </div>
                    <div class="col col1 first">
                        <div class="image round fit">
                            <a href="#" class="link"><img src="{% static 'images/tele.jpg' %}" alt="" width="320" height="320"></a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
    <!-- jQuery를 추가한 후 -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    $(document).ready(function () {
        // 애니메이션 대상 요소 선택
        var col1 = $(".col.col1");
        var col2 = $(".col.col2");

        // 초기 상태 설정
        col1.css({
            opacity: 0,
            transform: "translateX(-20px)"
        });

        col2.css({
            opacity: 0,
            transform: "translateX(20px)"
        });

        // 애니메이션 업데이트 함수
        function updateAnimation(scrollTop) {
            // col1 애니메이션 업데이트
            var col1Offset = col1.offset().top;
            if (col1Offset < scrollTop + window.innerHeight) {
                var col1Progress = Math.min(1, (scrollTop + window.innerHeight - col1Offset) / window.innerHeight);
                col1.css({
                    opacity: col1Progress,
                    transform: "translateX(" + (-300 + 300 * col1Progress) + "px)"
                });
            }

            // col2 애니메이션 업데이트
            var col2Offset = col2.offset().top;
            if (col2Offset < scrollTop + window.innerHeight) {
                var col2Progress = Math.min(1, (scrollTop + window.innerHeight - col2Offset) / window.innerHeight);
                col2.css({
                    opacity: col2Progress,
                    transform: "translateX(" + (300 - 300 * col2Progress) + "px)"
                });
            }
        }

        // 스크롤 이벤트 리스너 등록
        var lastScrollTop = 0;
        var ticking = false;

        function onScroll() {
            var scrollTop = $(window).scrollTop();

            if (!ticking) {
                requestAnimationFrame(function () {
                    updateAnimation(scrollTop);
                    ticking = false;
                });

                ticking = true;
            }

            lastScrollTop = scrollTop;
        }

        $(window).scroll(onScroll);
    });
</script>


    {% endblock %}
